#!/bin/bash

echo "ğŸ” Checking for nested 'docs/docs' structure..."

if [ -d "docs/docs" ]; then
  echo "ğŸ“‚ Found 'docs/docs'. Flattening structure..."

  # Move files up one level
  mv docs/docs/* docs/

  # Remove old nested folder
  rm -r docs/docs

  echo "âœ… Flattened 'docs/docs' to 'docs/'"
else
  echo "âœ… No nested 'docs/docs' structure found"
fi

# Check and fix sidebars.js
SIDEBAR_FILE="sidebars.js"
AUTOGEN_LINE="[{ type: 'autogenerated', dirName: '.' }]"

if [ -f "$SIDEBAR_FILE" ]; then
  grep -q "$AUTOGEN_LINE" "$SIDEBAR_FILE"
  if [ $? -ne 0 ]; then
    echo "âš ï¸  Updating sidebar to use autogenerated mode..."
    echo "module.exports = { tutorialSidebar: $AUTOGEN_LINE };" > "$SIDEBAR_FILE"
    echo "âœ… Updated sidebar to use autogenerated directory"
  else
    echo "âœ… Sidebar already uses autogenerated directory"
  fi
else
  echo "ğŸš« 'sidebars.js' not found â€” skipping sidebar fix"
fi

# Check for intro.md
if [ -f "docs/intro.md" ]; then
  echo "âœ… 'docs/intro.md' exists â€” good to go!"
else
  echo "âš ï¸  'docs/intro.md' is missing. Consider creating a landing doc there."
fi

echo "ğŸ§¼ Cleanup complete!"

#!/bin/bash

echo "ğŸ” Checking for nested 'docs/docs' structure..."

if [ -d "docs/docs" ]; then
  echo "ğŸ“‚ Found 'docs/docs'. Flattening structure..."

  # Move files up one level
  mv docs/docs/* docs/

  # Remove old nested folder
  rm -r docs/docs

  echo "âœ… Flattened 'docs/docs' to 'docs/'"
else
  echo "âœ… No nested 'docs/docs' structure found"
fi

# Check and fix sidebars.js
SIDEBAR_FILE="sidebars.js"
AUTOGEN_LINE="[{ type: 'autogenerated', dirName: '.' }]"

if [ -f "$SIDEBAR_FILE" ]; then
  grep -q "$AUTOGEN_LINE" "$SIDEBAR_FILE"
  if [ $? -ne 0 ]; then
    echo "âš ï¸  Updating sidebar to use autogenerated mode..."
    echo "module.exports = { tutorialSidebar: $AUTOGEN_LINE };" > "$SIDEBAR_FILE"
    echo "âœ… Updated sidebar to use autogenerated directory"
  else
    echo "âœ… Sidebar already uses autogenerated directory"
  fi
else
  echo "ğŸš« 'sidebars.js' not found â€” skipping sidebar fix"
fi

# Check for intro.md
if [ -f "docs/intro.md" ]; then
  echo "âœ… 'docs/intro.md' exists â€” good to go!"
else
  echo "âš ï¸  'docs/intro.md' is missing. Consider creating a landing doc there."
fi

echo "ğŸ§¼ Cleanup complete!"

#!/bin/bash

echo "ğŸ” Checking for nested 'docs/docs' structure..."

if [ -d "docs/docs" ]; then
  echo "ğŸ“‚ Found 'docs/docs'. Flattening structure..."

  # Move files up one level
  mv docs/docs/* docs/

  # Remove old nested folder
  rm -r docs/docs

  echo "âœ… Flattened 'docs/docs' to 'docs/'"
else
  echo "âœ… No nested 'docs/docs' structure found"
fi

# Check and fix sidebars.js
SIDEBAR_FILE="sidebars.js"
AUTOGEN_LINE="[{ type: 'autogenerated', dirName: '.' }]"

if [ -f "$SIDEBAR_FILE" ]; then
  grep -q "$AUTOGEN_LINE" "$SIDEBAR_FILE"
  if [ $? -ne 0 ]; then
    echo "âš ï¸  Updating sidebar to use autogenerated mode..."
    echo "module.exports = { tutorialSidebar: $AUTOGEN_LINE };" > "$SIDEBAR_FILE"
    echo "âœ… Updated sidebar to use autogenerated directory"
  else
    echo "âœ… Sidebar already uses autogenerated directory"
  fi
else
  echo "ğŸš« 'sidebars.js' not found â€” skipping sidebar fix"
fi

# Check for intro.md
if [ -f "docs/intro.md" ]; then
  echo "âœ… 'docs/intro.md' exists â€” good to go!"
else
  echo "âš ï¸  'docs/intro.md' is missing. Consider creating a landing doc there."
fi

echo "ğŸ§¼ Cleanup complete!"
